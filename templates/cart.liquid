<!-- Begin ReCharge code -->
{% comment %}
{% render 'subscription-cart-footer' %}
{% endcomment %}
<!-- End ReCharge code -->

<section class="cart-header">
  <div class="container">
    <h1 class="cart__title">Your Cart</h1>
  </div>
</section>
<section class="cart-section">
  <div class="container">
    <div class="card-card">
      {% if cart.item_count > 0 %}
        <form action="/cart" method="post" novalidate class="cart table-wrap">
          <div class="cart-form__content mobile-hidden">
            <table
              style="width: 100%"
              class="shop_table shop_table_responsive cart cart-form__contents"
              cellspacing="0"
            >
              <thead>
                <tr>
                  <th colspan="2">Product</th>
                  <th class="text-right">Price per Item</th>
                  <th>Quantity</th>
                  <th>Clear</th>
                </tr>
              </thead>
              <tbody>
                {% assign array = cart.items | reverse %}
                {% for item in array %}
                  <tr class="cart-form__cart-item cart_item">
                    <td class="product-thumbnail">
                     <img src='{{ item.image.src | img_url: '150x' }}' />
                    </td>
                    <td class="product-name">
                      <div class="product-name-under">
                        {{ item.product.title | escape }}
                      </div>
                    </td>
                    <td class="product-price">
                      {%- if item.original_price != item.final_price -%}
                        <div class="cart-item__discounted-prices">
                          <span class="visually-hidden"> Regular price </span>
                          <s class="cart-item__old-price product-option">
                            {{- item.original_price | money -}}
                          </s>
                          <span class="visually-hidden"> Sale price </span>
                          <strong class="cart-item__final-price product-option">
                            {{ item.final_price | money }}
                          </strong>
                        </div>
                      {%- else -%}
                        <div class="product-option">
                          {{ item.original_price | money }}
                        </div>
                      {%- endif -%}
                    </td>
                    <td class="cart-item__quantity">
                      {%- comment -%}
                      x{{ item.quantity }}
                      {%- endcomment -%}

                      <div class="cart-item__quantity-wrapper">
                        <button class="cart-item__quantity-minus"
                          js-item-minus 
                          data-id="{{ item.id }}" 
                          data-value="{{  item.quantity }}" 
                          {% if item.id == 39822341505082 or item.id == 40242852659258 %}
                            data-service-id="39999495274554"
                          {% elsif item.id == 40243401031738 or item.id == 40243405520954 %}
                            data-service-id="39999495110714"
                          {% elsif item.id == 40242851905594 or item.id == 39822378336314 %}
                           data-service-id="39999495307322"
                          {% endif %}
                          {% if item.id == 39999495274554 or item.id == 39999495110714 or item.id == 39999495307322 %}disabled{% endif %}
                        >
                          <span>_</span>
                        </button>
                        
                        <input class="cart-item__quantity-input" value="{{ item.quantity }}" disabled>

                        <button 
                          class="cart-item__quantity-plus" 
                          js-item-plus 
                          data-id="{{ item.id }}" 
                          data-value="{{  item.quantity }}" 
                          {% if item.id == 39822341505082 or item.id == 40242852659258 %}
                            data-service-id="39999495274554"
                          {% elsif item.id == 40243401031738 or item.id == 40243405520954 %}
                            data-service-id="39999495110714"
                          {% elsif item.id == 40242851905594 or item.id == 39822378336314 %}
                            data-service-id="39999495307322"
                          {% endif %}

                          {% if item.id == 39999495274554 or item.id == 39999495110714 or item.id == 39999495307322 %}disabled{% endif %}
                        >
                          <span>+</span>
                        </button>
                      </div>
                    </td>

                    <td class="cart__item-remove">
                      {% if item.id != 39999495274554 and item.id != 39999495110714 and item.id != 39999495307322 %}
                        <a 
                          href="/cart/clear" 
                         
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                          >
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                          </svg>
                        </a>
                      {% endif %}
                    </td>
                  </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>

          <div class="cart-form__content desktop-hidden">
            <div
              style="width: 100%"
              class="shop_table shop_table_responsive cart cart-form__contents"
              cellspacing="0"
            >
              {%- comment -%}
              <thead>
                <tr>
                  <th colspan="2">Product</th>
                  <th class="text-right">Price per Item</th>
                  <th>Quantity</th>
                  <th>Clear</th>
                </tr>
              </thead>
              {%- endcomment -%}
              <ul>
                {% assign array = cart.items | reverse %}
                {% for item in array %}
                  <li class="cart-form__cart-item cart_item">
                    <div class="cart-form__cart-item__top">
                      <div class="product-thumbnail">
                        <img src='{{ item.image.src | img_url: '150x' }}' />
                      </div>

                      <div class="cart-form__cart-item__top-content">
                        <div class="product-name">
                          <div class="product-name-under">
                            {{ item.product.title | escape }}
                          </div>
                        </div>
  
                        <div class="product-price">
                          {%- if item.original_price != item.final_price -%}
                            <div class="cart-item__discounted-prices">
                              <span class="visually-hidden"> Regular price </span>
                              <s class="cart-item__old-price product-option">
                                {{- item.original_price | money -}}
                              </s>
                              <span class="visually-hidden"> Sale price </span>
                              <strong class="cart-item__final-price product-option">
                                {{ item.final_price | money }}
                              </strong>
                            </div>
                          {%- else -%}
                            <div class="product-option">
                              {{ item.original_price | money }}
                            </div>
                          {%- endif -%}
                        </div>
                      </div>
                    </div>

                    <div class="cart-form__cart-item__bottom">
                      <div class="cart-item__quantity">
                        {%- comment -%}
                        x{{ item.quantity }}
                        {%- endcomment -%}
  
                        <div class="cart-item__quantity-wrapper">
                          <button class="cart-item__quantity-minus"
                            js-item-minus 
                            data-id="{{ item.id }}" 
                            data-value="{{  item.quantity }}" 
                            {% if item.id == 39822341505082 or item.id == 40242852659258 %}
                              data-service-id="39999495274554"
                            {% elsif item.id == 40243401031738 or item.id == 40243405520954 %}
                              data-service-id="39999495110714"
                            {% elsif item.id == 40242851905594 or item.id == 39822378336314 %}
                                data-service-id="39999495307322"
                            {% endif %}
                            {% if item.id == 39999495274554 or item.id == 39999495110714 or item.id == 39999495307322 %}disabled{% endif %}
                          >
                            <span>_</span>
                          </button>
                          
                          <input class="cart-item__quantity-input" value="{{ item.quantity }}" disabled>
  
                          <button 
                            class="cart-item__quantity-plus" 
                            js-item-plus 
                            data-id="{{ item.id }}" 
                            data-value="{{  item.quantity }}" 
                            {% if item.id == 39822341505082 or item.id == 40242852659258 %}
                              data-service-id="39999495274554"
                            {% elsif item.id == 40243401031738 or item.id == 40243405520954 %}
                              data-service-id="39999495110714"
                            {% elsif item.id == 40242851905594 or item.id == 39822378336314 %}
                                data-service-id="39999495307322"
                            {% endif %}
                            {% if item.id == 39999495274554 or item.id == 39999495110714 or item.id == 39999495307322 %}disabled{% endif %}
                          >
                            <span>+</span>
                          </button>
                        </div>
                      </div>
  
                      <div class="cart__item-remove">
                        {% if item.id != 39999495274554 and item.id != 39999495110714 and item.id != 39999495307322 %}
                          <a 
                            href="/cart/clear" 
                           
                          >
                            <svg
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 24 24"
                              stroke-width="1.5"
                              stroke="currentColor"
                            >
                              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                          </a>
                        {% endif %}
                        </div>
                    </div>
                  </li>
                {% endfor %}
              </ul>
          </div>
        </form>
      {% else %}
        <p>{{ 'cart.general.empty' | t }}</p>
        <p class="return-to-shop"><a class="button wc-backward" href="/pages/plans">Return to shop</a></p>
      {% endif %}

                                
      <div class="bussiness-review"></div>
    </div>

                                        <div class="cart-collaterals">
          <div class="row">
            <div class="col-12 col-lg-6">
              <h3 class="cart-collaterals-title mb-4">7 DAY MONEY BACK GUARANTEE</h3>
              <p class="pt-3" style="font-size:12px;font-weight:500">
Each membership includes 7 days from receipt of equipment to test out the device and service at no risk. If the device or service does not meet your expectations, simply request an RMA and return the device to us within 7 days of the date in which it was delivered. Devices returned after this period are not entitled to a refund for the One-Time Membership Fee.
              </p>
              <p class="pt-3" style="font-size:12px;font-weight:500">
By clicking on proceed to checkout, you are confirming your agreement to and compliance with Nomad Internet's Terms of Service. (TOS).
              </p>
            </div>
            <div class="cart_totals col-12 col-lg-6">
              <h2 class="cart-collaterals-title">Order Summary</h2>
              <table cellspacing="0" class="shop_table shop_table_responsive mt-4">
                <tbody>
                  <tr class="cart-subtotal">
                    <th>Subtotal</th>
                    <td data-title="Subtotal">
                      <span class="Price-amount amount">{{ cart.total_price | money_without_trailing_zeros }}</span>
                    </td>
                  </tr>
                  <tr class="order-total">
                    <th style="font-weight:700; font-size:18px;">Total Due Today</th>
                    <td data-title="Total Due Today">
                      <strong
                        ><span class="Price-amount amount" style="font-weight:700; font-size:18px;">
                          {{- cart.total_price | money_without_trailing_zeros }}
                        </span></strong
                      >
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="col-12 proceed-to-checkout">
              <a
                id="accept-tosed"
                style="display: none;"
                style="color: #fff;border-radius: 10px;"
                class="button alt forward btn btn-primary"
              >
                Proceed to checkout
              </a>

              <a
                uid="accepted-tosed"
                href="{% if cart.item_count > 0 %}/checkout{% else %}/pages/plans{% endif %}"
                class="checkout checkout-button button alt forward btn btn-primary"
              >
                {% if cart.item_count > 0 %}Proceed to checkout{% else %}Return to shop{% endif %}
              </a>

               {% if additional_checkout_buttons %}
              {{ content_for_additional_checkout_buttons }}
              {% endif %}
              
            </div>
            
          </div>
        </div>
  </div>
  <script id="cart-data">{{ cart | json }}</script>
</section>

<style>
  .product-price-bottom {
    margin-top: 45px;
  }
  .card-card .card-title {
    text-transform: uppercase;
  }
  .coupon p {
    margin-bottom: 0px;
  }
  .checkout-button {
    font-size: 14px;
  }
  .wc-backward {
    color: #404040;
    border-color: #404040;
    border: 1px solid;
    background: transparent;
    font-weight: 400;
    font-size: 0.75rem;
    line-height: 1.65rem;
    text-transform: uppercase;
    padding: 1rem !important;
    text-decoration: none;
  }
  .wc-backward:hover {
    color: #fff;
    background-color: #404040;
    border-color: #404040;
    text-decoration: none;
  }
  .cart_item a.remove {
    cursor: pointer;
  }
  @media (max-width: 575.98px) {
    .product-price-bottom {
      margin-top: 15px;
    }
  }
</style>
<script src="{{ 'jquery.cookie.js' | asset_url }}"></script>
<script>
 /* var $j = jQuery.noConflict();
  var ck_url;
  var discount_code = $j.cookie("discount_code");

  console.log("test ck_url discount_code", discount_code);
  
  $j.getJSON('/cart.js', function(cart) {
    ck_url = "https://checkout.rechargeapps.com/r/checkout?domain=nomadplus.myshopify.com&cart_token=" + cart.token;
    if (discount_code) {
      ck_url = ck_url + "&discount=" + discount_code;
    }

    console.log("getJson ck_url", ck_url);
  });
  
  $j('.checkout').on('click', function (e) {
    location.href = ck_url;
    console.log("ck_url", ck_url);
  });*/
</script>
<script src="{{ 'cart.js' | asset_url }}"></script>              
<script>
  function simulate(element, eventName) {
    var options = extend(defaultOptions, arguments[2] || {});
    var oEvent,
      eventType = null;

    for (var name in eventMatchers) {
      if (eventMatchers[name].test(eventName)) {
        eventType = name;
        break;
      }
    }

    if (!eventType) throw new SyntaxError('Only HTMLEvents and MouseEvents interfaces are supported');

    if (document.createEvent) {
      oEvent = document.createEvent(eventType);
      if (eventType == 'HTMLEvents') {
        oEvent.initEvent(eventName, options.bubbles, options.cancelable);
      } else {
        oEvent.initMouseEvent(
          eventName,
          options.bubbles,
          options.cancelable,
          document.defaultView,
          options.button,
          options.pointerX,
          options.pointerY,
          options.pointerX,
          options.pointerY,
          options.ctrlKey,
          options.altKey,
          options.shiftKey,
          options.metaKey,
          options.button,
          element
        );
      }
      element.dispatchEvent(oEvent);
    } else {
      options.clientX = options.pointerX;
      options.clientY = options.pointerY;
      var evt = document.createEventObject();
      oEvent = extend(evt, options);
      element.fireEvent('on' + eventName, oEvent);
    }
    return element;
  }

  function extend(destination, source) {
    for (var property in source) destination[property] = source[property];
    return destination;
  }

  var eventMatchers = {
    HTMLEvents: /^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,
    MouseEvents: /^(?:click|dblclick|mouse(?:down|up|over|move|out))$/,
  };
  var defaultOptions = {
    pointerX: 0,
    pointerY: 0,
    button: 0,
    ctrlKey: false,
    altKey: false,
    shiftKey: false,
    metaKey: false,
    bubbles: true,
    cancelable: true,
  };

  $(document).ready(function () {
    $('.checkout-button').on('click', function (e) {
      e.preventDefault();
      const href = e.target.href;
      ttq.track('InitiateCheckout');
      location.href = href;
    });
  });
  $(window).ready(function () {
    $('[name="checkout"]').click();
  });
  
</script>
<!-- Twitter single-event website tag code -->
<script src="//platform.twitter.com/oct.js" type="text/javascript" defer></script>
<script type="text/javascript">
  twttr.conversion.trackPid('o4veu', { tw_sale_amount: 0, tw_order_quantity: 0 });
</script>
<noscript>
  <img
    height="1"
    width="1"
    style="display:none;"
    alt=""
    src="https://analytics.twitter.com/i/adsct?txn_id=o4veu&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0"
  >
  <img
    height="1"
    width="1"
    style="display:none;"
    alt=""
    src="//t.co/i/adsct?txn_id=o4veu&p_id=Twitter&tw_sale_amount=0&tw_order_quantity=0"
  >
</noscript>
<!-- End Twitter single-event website tag code -->
